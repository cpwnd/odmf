

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-EN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en-EN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; ODMF Docs 0.1.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Views" href="views.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ODMF Docs
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">What is ODMF</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-operation">Server operation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#folders">Folders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#datafiles-folder">datafiles-folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#media-folder">media-folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preferences-folder">preferences-folder</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customization">Customization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logo-and-image">Logo and image</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#import-data">Import data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upload-datafiles">Upload datafiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import">Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manipulate-datasets">Manipulate datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">Configuration files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#import-description-keywords">Import description keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#column-description-keywords">Column description keywords</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="wiki.html">Wiki</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ODMF Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/odmf/usage.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<span id="usage"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="server-operation">
<span id="server-operation"></span><h2>Server operation<a class="headerlink" href="#server-operation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="folders">
<span id="folders"></span><h3>Folders<a class="headerlink" href="#folders" title="Permalink to this headline">¶</a></h3>
<p>The purpose of directories are explained.</p>
<div class="section" id="datafiles-folder">
<span id="datafiles-folder"></span><h4>datafiles-folder<a class="headerlink" href="#datafiles-folder" title="Permalink to this headline">¶</a></h4>
<p>All files that are uploaded via the <code class="docutils literal notranslate"><span class="pre">download</span></code> view are placed in this folder.</p>
</div>
<div class="section" id="media-folder">
<span id="media-folder"></span><h4>media-folder<a class="headerlink" href="#media-folder" title="Permalink to this headline">¶</a></h4>
<p>CSS styles, images that are part of the software and JavaScript files that are included in the templates.</p>
</div>
<div class="section" id="preferences-folder">
<span id="preferences-folder"></span><h4>preferences-folder<a class="headerlink" href="#preferences-folder" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="views">
<span id="views"></span><h2>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="views.html">views chapter</a> for all views, that are displayed on the left side navigation bar of the user interface.</p>
</div>
<div class="section" id="customization">
<span id="customization"></span><h2>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="logo-and-image">
<span id="logo-and-image"></span><h3>Logo and image<a class="headerlink" href="#logo-and-image" title="Permalink to this headline">¶</a></h3>
<p>The user can customize the logo (1) and the background image (2).</p>
<p><img alt="landing page" src="../_images/landing-page.jpg" /></p>
<p>Therefore to change (1) the path <code class="docutils literal notranslate"><span class="pre">webpage/media/schwingbach-logo.png</span></code> and for (2) the path at
<code class="docutils literal notranslate"><span class="pre">webpage/media/navigation-background.jpg</span></code> has to be altered.</p>
</div>
</div>
<div class="section" id="import-data">
<span id="import-data"></span><h2>Import data<a class="headerlink" href="#import-data" title="Permalink to this headline">¶</a></h2>
<p>The data import is one of the core features of the platform.
The import saves the measured data into a structured database schema.</p>
<p>The data import process consists of several steps, (1) upload files into the file system of the server and
(2) create import <a class="reference external" href="usage.html#configuration-files">configuration file (see)</a> and (3) import via configuration into
database.
Already imported data can be further altered (split) and reused (transformations).</p>
<div class="section" id="upload-datafiles">
<span id="upload-datafiles"></span><h3>Upload datafiles<a class="headerlink" href="#upload-datafiles" title="Permalink to this headline">¶</a></h3>
<p>Data files are uploaded via the <code class="docutils literal notranslate"><span class="pre">datafiles</span></code> tab. Measurement data can only imported by file. Therefore measurement files are uploaded onto the servers file system. Any file can be uploaded onto the servers file system.</p>
</div>
<div class="section" id="import">
<span id="import"></span><h3>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h3>
<p>It’s only possible to import files with <code class="docutils literal notranslate"><span class="pre">xls</span></code>,<code class="docutils literal notranslate"><span class="pre">xlsx</span></code>,<code class="docutils literal notranslate"><span class="pre">csv</span></code> as file extension.
A data file has a maximum file size that it cannot exceed, otherwise the import algorithm will time out.</p>
</div>
<div class="section" id="manipulate-datasets">
<span id="manipulate-datasets"></span><h3>Manipulate datasets<a class="headerlink" href="#manipulate-datasets" title="Permalink to this headline">¶</a></h3>
<p><strong>Split datasets:</strong></p>
</div>
<div class="section" id="configuration-files">
<span id="configuration-files"></span><h3>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h3>
<p>The import saves the measured data into a structured database schema. Unfortunately all measurement output of
instruments in the field have different structures. Therefore a solution is that the user has to provide a configuration
file, for each instrument-specific structure. A configuration file specify a key-value pairs-like mapping of
instruments data schema that’s about to be written into the database schema.
The pair of keywords and their values (full list see below) have to be consistent, so the server can import the measured data.</p>
<p>The configuration file is a definition of the import process of all files in a directory.
The concept of a configuration file assumes, that in general each data files import information can be covered by a
description and multiple column descriptions.
A <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">description</span></code> contains information that depict the import on file level and the <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">descriptions</span></code> on column level.
All descriptions of the configuration, are made by the user once, contain all information to automatically import the data of multiple files.
So the user is able to omit most of the configuration of future imports for data files in this folder.</p>
<!-- TODO all keywords --><div class="section" id="import-description-keywords">
<span id="import-description-keywords"></span><h4>Import description keywords<a class="headerlink" href="#import-description-keywords" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>instrument</strong> <em>int</em>: The database id from the instrument that produces that file. Is Mandatory and has no default.</li>
<li><strong>skiplines</strong> <em>int</em>: The amount of lines, which the import algorithm will skip, before reading data rows. Is optional
and default ist 0.</li>
<li><strong>delimiter</strong> <em>str</em>: Symbol used to separate the columns. Is Optional and default is <code class="docutils literal notranslate"><span class="pre">,</span></code>.</li>
<li><strong>decimalpoint</strong> <em>str</em>: Symbol used to separate decimal place. Is Optional and defalt is <code class="docutils literal notranslate"><span class="pre">.</span></code>.</li>
<li><strong>dateformat</strong> <em>str</em>: Format of the date in the <strong>datecolumns</strong>. Default is <code class="docutils literal notranslate"><span class="pre">%d/%m/%Y</span> <span class="pre">%H:%M:%S</span></code></li>
<li><strong>datecolumns</strong> <em>list or int</em>: Number of column(s), which contains the date in <strong>dateformat</strong>, first column is 1.</li>
<li><strong>project</strong> <em>str</em>: Links to project from database</li>
<li><strong>timezone</strong> <em>str</em>: In pytz format</li>
<li><strong>nodata</strong> <em>list</em>: list of values that don’t represent valid data. E.g. [‘NaN’]</li>
<li><strong>worksheet</strong> <em>int</em>: <em>XlsImport only</em> The position of the worksheet of an excel file. Optional and default is the first (1)</li>
<li><strong>sitecolumn</strong> <em>int</em>: <em>LogImport only</em> Number of column, which contains the site as character sequence.</li>
<li><strong>value</strong> <em>float</em>: <em>LogImport only</em></li>
<li><strong>logtext</strong> <em>str</em>: <em>LogImport only</em></li>
<li><strong>msg</strong> <em>str</em>: <em>LogImport only</em></li>
</ul>
</div>
<div class="section" id="column-description-keywords">
<span id="column-description-keywords"></span><h4>Column description keywords<a class="headerlink" href="#column-description-keywords" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>name</strong> <em>str</em>: Name of the column and name of the dataset. Also name of the type of data, as defined for the <a class="reference external" href="wiki.html#valuetypes">value type number</a></li>
<li><strong>column</strong> <em>int</em>: Position of the column in the file. Note: The first column is 0</li>
<li><strong>valuetype</strong> <em>int</em>: Id of the value type stored in the column.</li>
<li><strong>factor</strong> <em>float</em>: If the units of the column and the valuetype differ, use factor for conversion</li>
<li><strong>comment</strong> <em>str</em>: The new dataset can be commented by this comment</li>
<li><strong>difference</strong> <em>str</em>: If True, the stored values will be the difference to the value of the last row</li>
<li><strong>minvalue</strong> <em>float</em>: This is the allowed lowest value (not converted). Lower values will not be imported</li>
<li><strong>maxvalue</strong> <em>float</em>: This is the allowed highest value. Higher values will not be converted</li>
<li><strong>append</strong> <em>int</em>: For automatic import, append to this datasetid</li>
<li><strong>level</strong> <em>float</em>: Level property of the dataset. Use this for Instruments measuring at one site in different depth</li>
<li><strong>access</strong> <em>int</em>: Access property of the dataset. See <a class="reference external" href="wiki.html#access-levels">wiki</a> for a list of all access levels.</li>
<li><strong>ds_column</strong> <em>int</em>: <em>ManualMeasurementImport only</em> explicit dataset for the uploading column</li>
<li><strong>sample_mapping</strong> <em>dict</em>: <em>ManualMeasurements and LogImport only</em> Special keyword for manual measurements to map
labcodes to site ids. E.g. <code class="docutils literal notranslate"><span class="pre">{'keywords':</span> <span class="pre">'value'}</span></code></li>
</ul>
<p>If no <code class="docutils literal notranslate"><span class="pre">{*}.conf</span></code> file is present in a folder, the parent directory is searched for a configuration file.</p>
<p>There should be only one configuration file per folder.</p>
<!-- TODO: standard configuration (?) --><div class="note admonition">
  <p class="first admonition-title">File encoding</p>
  <p class="last">
  Configuration files are processed with the `configparser` module. This module requires that a file is encoded in `utf-8` or a subset.
  If a config file is not encoded in `utf-8` or a subset, when the file import is initiated in the config files directory
  a error message is displayed to the user.</p>
</div><p>Configuration file example:</p>
<div class="highlight-pacmanconf notranslate"><div class="highlight"><pre><span></span>TBD.
; description part
<span class="k">[IC (Name of the config file)]</span>
; TBD
<span class="na">instrument</span> <span class="o">=</span> 30
<span class="na">skiplines</span> <span class="o">=</span> 1
<span class="na">dateformat</span> <span class="o">=</span> %d_%m_%Y
<span class="na">datecolumns</span> <span class="o">=</span> 2
<span class="na">sitecolumn</span> <span class="o">=</span> 3
<span class="na">sample_mapping</span> <span class="o">=</span> {&#39;A1W&#39;: &#39;112&#39;,
 &#39;A2W&#39;: &#39;113&#39;,
 &#39;A3W&#39;: &#39;114&#39;,
 &#39;B1&#39;: &#39;85&#39;,
 &#39;B2&#39;: &#39;86&#39;,
 &#39;B3&#39;: &#39;87&#39;,
 &#39;E1&#39;: &#39;88&#39;,
 &#39;E2&#39;: &#39;89&#39;,
 &#39;E3&#39;: &#39;90&#39;,
 &#39;F1&#39;: &#39;79&#39;,
 &#39;F2&#39;: &#39;80&#39;,
 &#39;F3&#39;: &#39;81&#39;,
 &#39;FF1&#39;: &#39;91&#39;,
 &#39;FF2&#39;: &#39;92&#39;,
 &#39;GL1&#39;: &#39;109&#39;,
 &#39;GL2&#39;: &#39;110&#39;,
 &#39;GL3&#39;: &#39;111&#39;,
 &#39;K1&#39;: &#39;82&#39;,
 &#39;K2&#39;: &#39;83&#39;,
 &#39;K3&#39;: &#39;84&#39;}

; column part
<span class="k">[N-Nitrat (descriptor of the column)]</span>
<span class="na">column</span> <span class="o">=</span> 5
<span class="na">name</span> <span class="o">=</span> N-Nitrat
<span class="na">valuetype</span> <span class="o">=</span> 16
<span class="na">factor</span> <span class="o">=</span> 1
<span class="na">minvalue</span> <span class="o">=</span> 0
<span class="na">maxvalue</span> <span class="o">=</span> 100
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="views.html" class="btn btn-neutral float-right" title="Views" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Philipp Kraft, Chris Weber

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.1.1',
              LANGUAGE:'en-EN',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>